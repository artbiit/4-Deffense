# [ Chapter5 Team Projects ] 4 Dollar Defense

## Team 4 dollars ğŸ’µ

![alt text](./docs/readme/image.png)
![alt text](./docs/readme/image_.png)

## íŒ€ì› ì†Œê°œ

|                                                 ê¹€ì¤€ì˜                                                 |                                                ì†¡ìŠ¹í™˜                                                 |                                                ì „ë´‰ì¤€                                                 |
| :----------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------: |
|                                                  ISTP                                                  |                                                 INTP                                                  |                                                 INTP                                                  |
| <p><img src="https://avatars.githubusercontent.com/u/127184534?v=4" width="400px" height="150px"/></p> | <p><img src="https://avatars.githubusercontent.com/u/73187151?v=4" width="400px" height="150px"/></p> | <p><img src="https://avatars.githubusercontent.com/u/95843762?v=4" width="400px" height="150px"/></p> |
|                                [@WaDDaDDa](https://github.com/WaDDaDDa)                                |                           [@ShrimpManiac](https://github.com/ShrimpManiac)                            |                              [@devbong92](https://github.com/devbong92)                               |
|                                [Blog Link](https://waddak.tistory.com)                                 |                               [Blog Link](https://velog.io/@lirymambo)                                |                              [Blog Link](https://velog.io/@vamuzz/posts)                              |

|                                                ì´ìƒíœ˜                                                 |                                                 ì´ìƒë¯¼                                                 |                                                ì´ì •ìˆ˜                                                 |
| :---------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------: |
|                                                 ISFJ                                                  |                                                  ISFJ                                                  |                                                 INTP                                                  |
| <p><img src="https://avatars.githubusercontent.com/u/26805738?v=4" width="400px" height="150px"/></p> | <p><img src="https://avatars.githubusercontent.com/u/173933283?v=4" width="400px" height="150px"/></p> | <p><img src="https://avatars.githubusercontent.com/u/44199507?v=4" width="400px" height="150px"/></p> |
|                            [@LeeSangHwee](https://github.com/LeeSangHwee)                             |                                  [@yism97](https://github.com/yism97)                                  |                                [@artbiit](https://github.com/artbiit)                                 |
|                                [Blog Link](https://velog.io/@tkdgnl56)                                |                                 [Blog Link](https://velog.io/@lsm1997)                                 |                                [Blog Link](https://velog.io/@artbiit)                                 |

## ì‹œì—°ì˜ìƒ

[![ì‹œì—°ì˜ìƒ_YOUTUBE](./docs/readme/image.png)](https://youtu.be/Zs2deBwlfOc)

## í”„ë¡œì íŠ¸ ê°œìš”

**4-Deffense**ëŠ” TCP í†µì‹ ìœ¼ë¡œ êµ¬í˜„í•œ 1:1 ë©€í‹°í”Œë ˆì´ì–´ íƒ€ì›Œë””íœìŠ¤ ê²Œì„ì…ë‹ˆë‹¤. í”Œë ˆì´ì–´ëŠ” íƒ€ì›Œë¥¼ ì„¤ì¹˜í•˜ì—¬ ëª°ë ¤ë“œëŠ” ëª¬ìŠ¤í„°ë“¤ë¡œë¶€í„° ê¸°ì§€ë¥¼ ë°©ì–´í•˜ê³  ìƒëŒ€ë°©ë³´ë‹¤ ë” ì˜¤ë˜ ì‚´ì•„ë‚¨ì•„ì•¼ í•©ë‹ˆë‹¤.

## êµ¬í˜„ ê¸°ëŠ¥

### í•„ìˆ˜ ê¸°ëŠ¥

- [x] **íšŒì›ê°€ì…/ë¡œê·¸ì¸** - JWT ê¸°ë°˜
- [x] **ê²Œì„ ë§¤ì¹­**
- [x] **ìƒíƒœ ë™ê¸°í™”**
- [x] **ëª¬ìŠ¤í„° ì†Œí™˜**
- [x] **íƒ€ì›Œì„¤ì¹˜**
- [x] **íƒ€ì›Œ -> ëª¬ìŠ¤í„° ê³µê²©**
- [x] **ëª¬ìŠ¤í„° ì‚¬ë§ì²˜ë¦¬** - í”Œë ˆì´ì–´ ê³¨ë“œ/ì ìˆ˜ ì¦ê°€
- [x] **ê¸°ì§€ í”¼ê²©**
- [x] **ê²Œì„ì˜¤ë²„**
- [x] **ê²Œì„ ì§„í–‰ì— ë”°ë¥¸ ë‚œì´ë„ (ëª¬ìŠ¤í„° ë ˆë²¨) ì¦ê°€**

### ì¶”ê°€ ê¸°ëŠ¥

- [x] **ì»¤ìŠ¤í…€ ëª¬ìŠ¤í„° ì´ë™ê²½ë¡œ**
- [x] **ìœ ì €ì •ë³´ ìºì‹±** - Redis

### ì„œë²„ êµ¬ì„±

![alt text](./docs/readme/server_image.png)

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“ ROOT
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ ğŸ“ assets
â”‚   â”œâ”€â”€ base.json
â”‚   â”œâ”€â”€ monster.json
â”‚   â””â”€â”€ tower.json
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ ğŸ“ docs
â”‚   â””â”€â”€ troubleshootings
â”‚       â”œâ”€â”€ missingFieldsTowerId.md
â”‚       â”œâ”€â”€ monsterAscension.md
â”‚       â”œâ”€â”€ monsterAscension.png
â”‚       â”œâ”€â”€ monsterCollision.md
â”‚       â”œâ”€â”€ monsterCollision.png
â”‚       â””â”€â”€ opponentUser.md
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ jsonconfig.json
â”œâ”€â”€ package.json
â”œâ”€â”€ ğŸ“ src
â”‚   â”œâ”€â”€ ğŸ“ classes
â”‚   â”‚   â”œâ”€â”€ ğŸ“ managers
â”‚   â”‚   â”‚   â”œâ”€â”€ base.manager.js
â”‚   â”‚   â”‚   â””â”€â”€ interval.manager.js
â”‚   â”‚   â””â”€â”€ ğŸ“ models
â”‚   â”‚       â”œâ”€â”€ game.class.js
â”‚   â”‚       â”œâ”€â”€ matchMaker.class.js
â”‚   â”‚       â”œâ”€â”€ monster.class.js
â”‚   â”‚       â”œâ”€â”€ tower.class.js
â”‚   â”‚       â””â”€â”€ user.class.js
â”‚   â”œâ”€â”€ ğŸ“ configs
â”‚   â”‚   â””â”€â”€ configs.js
â”‚   â”œâ”€â”€ ğŸ“ constants
â”‚   â”‚   â”œâ”€â”€ assets.js
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â”œâ”€â”€ env.js
â”‚   â”‚   â”œâ”€â”€ game.js
â”‚   â”‚   â”œâ”€â”€ handlerIds.js
â”‚   â”‚   â”œâ”€â”€ header.js
â”‚   â”‚   â””â”€â”€ redis.js
â”‚   â”œâ”€â”€ ğŸ“ db
â”‚   â”‚   â”œâ”€â”€ ğŸ“ game
â”‚   â”‚   â”‚   â””â”€â”€ game.redis.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“ match
â”‚   â”‚   â”‚   â””â”€â”€ match.redis.js
â”‚   â”‚   â”œâ”€â”€ mysql.js
â”‚   â”‚   â”œâ”€â”€ redis.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“ sql
â”‚   â”‚   â”‚   â””â”€â”€ schema.sql
â”‚   â”‚   â”œâ”€â”€ ğŸ“ user
â”‚   â”‚   â”‚   â”œâ”€â”€ user.coord.db.js
â”‚   â”‚   â”‚   â”œâ”€â”€ user.coord.queris.js
â”‚   â”‚   â”‚   â”œâ”€â”€ user.db.js
â”‚   â”‚   â”‚   â””â”€â”€ user.queries.js
â”‚   â”‚   â””â”€â”€ utils.js
â”‚   â”œâ”€â”€ ğŸ“ events
â”‚   â”‚   â”œâ”€â”€ onConnection.js
â”‚   â”‚   â”œâ”€â”€ onData.js
â”‚   â”‚   â”œâ”€â”€ onEnd.js
â”‚   â”‚   â””â”€â”€ onError.js
â”‚   â”œâ”€â”€ ğŸ“ handlers
â”‚   â”‚   â”œâ”€â”€ ğŸ“ attack
â”‚   â”‚   â”‚   â””â”€â”€ attack.handler.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“ game
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ login.handler.js
â”‚   â”‚   â”œâ”€â”€ matchRequest.handler.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“ monster
â”‚   â”‚   â”‚   â”œâ”€â”€ monsterDeath.handler.js
â”‚   â”‚   â”‚   â””â”€â”€ monsterSpawn.handler.js
â”‚   â”‚   â”œâ”€â”€ register.handler.js
â”‚   â”‚   â”œâ”€â”€ result.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“ tower
â”‚   â”‚   â”‚   â””â”€â”€ towerPurchase.handler.js
â”‚   â”‚   â””â”€â”€ user
â”‚   â”œâ”€â”€ ğŸ“ init
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ loadAssets.js
â”‚   â”‚   â””â”€â”€ loadProtos.js
â”‚   â”œâ”€â”€ ğŸ“ protobuf
â”‚   â”‚   â””â”€â”€ packet.proto
â”‚   â”œâ”€â”€ ğŸ“ server.js
â”‚   â”œâ”€â”€ ğŸ“ session
â”‚   â”‚   â”œâ”€â”€ game.session.js
â”‚   â”‚   â”œâ”€â”€ sessions.js
â”‚   â”‚   â””â”€â”€ user.session.js
â”‚   â”œâ”€â”€ ğŸ“ tests
â”‚   â”‚   â”œâ”€â”€ attack.test.js
â”‚   â”‚   â”œâ”€â”€ client.test.js
â”‚   â”‚   â””â”€â”€ register.test.js
â”‚   â””â”€â”€ ğŸ“ utils
â”‚       â”œâ”€â”€ ğŸ“ asset
â”‚       â”‚   â””â”€â”€ getAssets.js
â”‚       â”œâ”€â”€ dateFormatter.js
â”‚       â”œâ”€â”€ ğŸ“ error
â”‚       â”‚   â”œâ”€â”€ customError.js
â”‚       â”‚   â”œâ”€â”€ errorCodes.js
â”‚       â”‚   â””â”€â”€ errorHandler.js
â”‚       â”œâ”€â”€ logger.js
â”‚       â”œâ”€â”€ ğŸ“ notification
â”‚       â”‚   â”œâ”€â”€ attack.notification.js
â”‚       â”‚   â”œâ”€â”€ base.notification.js
â”‚       â”‚   â”œâ”€â”€ makeNotification.js
â”‚       â”‚   â”œâ”€â”€ match.notification.js
â”‚       â”‚   â”œâ”€â”€ monster.notification.js
â”‚       â”‚   â”œâ”€â”€ stateSync.notification.js
â”‚       â”‚   â””â”€â”€ tower.notification.js
â”‚       â”œâ”€â”€ ğŸ“ parser
â”‚       â”‚   â””â”€â”€ packetParser.js
â”‚       â”œâ”€â”€ ğŸ“ response
â”‚       â”‚   â””â”€â”€ createResponse.js
â”‚       â””â”€â”€ transformCase.js
â””â”€â”€ yarn.lock
```

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

- [C2Sì „íˆ¬ì•Œë¦¼ íŒ¨í‚·ì— íƒ€ì›ŒIDê°€ ëˆ„ë½ë˜ë˜ ì˜¤ë¥˜ í•´ê²°](./docs/troubleshootings/missingFieldsTowerId.md)
- [ì  íƒ€ì›Œì„¤ì¹˜ ì•Œë¦¼ì„ ë³´ë‚¼ë•Œ ìƒëŒ€ë°© ìœ ì € ê°ì²´ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ëŠ” ì˜¤ë¥˜ ìˆ˜ì •
  ](./docs//troubleshootings/opponentUser.md)
- [ëª¬ìŠ¤í„°ê°€ ê¸¸ì„ ë”°ë¼ì„œ ì´ë™í•˜ì§€ ì•Šê³  ì‹œì‘í•˜ìë§ˆì ìœ„ ë˜ëŠ” ì•„ë˜ë¡œ ì¼ì§ì„ ìœ¼ë¡œ ì´ë™í•˜ë‹¤ê°€ ë§µì„ ì´íƒˆí•˜ëŠ” ì˜¤ë¥˜ í•´ê²°](./docs/troubleshootings/monsterAscension.md)
- [ê²½ë¡œë¥¼ ì •ìƒì ìœ¼ë¡œ ì¤˜ë„ ëª¬ìŠ¤í„°ê°€ ì´ìƒí•˜ê²Œ ì›€ì§ì´ëŠ” í˜„ìƒ í•´ê²°](./docs/troubleshootings/monsterCollision.md)

### íŒ¨í‚· ëª…ì„¸ì„œ

![alt text](./docs/readme/image-1.png)
![alt text](./docs/readme/image-2.png)

### ERD

#### User Data - MySQL

![alt text](./docs/readme/image-3.png)

### Game Data - JSON

```json
// base.json
{
  "name": "base",
  "version": "1.0.0",
  "data": [
    {
      "maxHp": 100
    }
  ]
}
```

```json
// monster.json
{
  "name": "monster",
  "version": "1.0.0",
  "data": [
    {
      "id": "MON00001",
      "DisplayName": "ì™¸ëˆˆê³µë£¡",
      "Description": "ì•½í•œê³µë£¡",
      "maxHp": 100,
      "HpPerLv": 10,
      "spd": 150,
      "def": 0,
      "DefPerLv": 3,
      "Atk": 10,
      "AtkPerLv": 2
    },
    {
      "id": "MON00002",
      "DisplayName": "í°ëˆˆì• ë²Œë ˆ",
      "Description": "ì•½í•œë²Œë ˆ",
      "maxHp": 100,
      "HpPerLv": 15,
      "spd": 150,
      "def": 0,
      "DefPerLv": 5,
      "Atk": 5,
      "AtkPerLv": 1
    },
    {
      "id": "MON00003",
      "DisplayName": "ë¾°ì¡±ë¶€ë¦¬ê³µë£¡",
      "Description": "ë¹ ë¥¸ê³µë£¡",
      "maxHp": 100,
      "HpPerLv": 10,
      "spd": 150,
      "def": 0,
      "DefPerLv": 1,
      "Atk": 7,
      "AtkPerLv": 2
    },
    {
      "id": "MON00004",
      "DisplayName": "ë¶‰ì€ëˆˆê³µë£¡",
      "Description": "ì‹ ê¸°í•œê³µë£¡",
      "maxHp": 100,
      "HpPerLv": 20,
      "spd": 150,
      "def": 0,
      "DefPerLv": 10,
      "Atk": 15,
      "AtkPerLv": 3
    },
    {
      "id": "MON00005",
      "DisplayName": "ê²€ì •ë°•ì¥",
      "Description": "ì œì¼ ë¹ ë¦„",
      "maxHp": 100,
      "HpPerLv": 10,
      "spd": 150,
      "def": 0,
      "DefPerLv": 1,
      "Atk": 10,
      "AtkPerLv": 3
    }
  ]
}
```

```json
{
  "name": "tower",
  "version": "1.0.0",
  "data": [
    {
      "id": "TOW00001",
      "DisplayName": "ì¼ë°˜íƒ€ì›Œ",
      "Description": "í‰ë²”í•œ íƒ€ì›Œ",
      "Power": 40,
      "PowerPerLv": 10,
      "Range": 300,
      "Cooldown": 180,
      "Duration": 30,
      "Cost": 100,
      "Extra": 1,
      "ExtraPerLv": 0.5
    },
    {
      "id": "TOW00002",
      "DisplayName": "í™”ì—¼íƒ€ì›Œ",
      "Description": "í™”ì—¼ ê´‘ì—­ê³µê²© íƒ€ì›Œ",
      "Power": 60,
      "PowerPerLv": 15,
      "Range": 400,
      "Cooldown": 300,
      "Duration": 0,
      "Cost": 100,
      "Extra": 100,
      "ExtraPerLv": 0
    },
    {
      "id": "TOW00003",
      "DisplayName": "ë²ˆê°œíƒ€ì›Œ",
      "Description": "ì²´ì¸ ë¼ì´íŠ¸ë‹ íƒ€ì›Œ",
      "Power": 20,
      "PowerPerLv": 5,
      "Range": 200,
      "Cooldown": 60,
      "Duration": 0,
      "Cost": 100,
      "Extra": 3,
      "ExtraPerLv": 1
    },
    {
      "id": "TOW00004",
      "DisplayName": "ì–¼ìŒíƒ€ì›Œ",
      "Description": "ì´ë™ì†ë„ë¥¼ ì¤„ì—¬ì£¼ëŠ” íƒ€ì›Œ",
      "Power": 10,
      "PowerPerLv": 5,
      "Range": 300,
      "Cooldown": 120,
      "Duration": 0,
      "Cost": 100,
      "Extra": 10,
      "ExtraPerLv": 1
    }
  ]
}
```
